<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>Marcin Copik | perf-taint</title>
<meta name="description" content="Personal webpage">

<!-- Open Graph -->


<!-- Bootstrap & MDB -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" integrity="sha512-RO38pBRxYH3SoOprtPTD86JFOclM51/XTIdEPh5j8sj4tp8jmQIx26twG52UaLi//hQldfrh7e51WzP9wuP32Q==" crossorigin="anonymous" />

<!-- Fonts & Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"  integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.1/css/academicons.css" integrity="sha512-WgL+hxwL4NdLGGZ4Euo/BmGAcQgyRRJsTQbNPGui+nWlzaF+3f2zf2rh578ccU3YINJCi8LvHyV1OHLJ8effBA==" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

<!-- Code Syntax Highlighting -->
<link rel="stylesheet" href="https://gitcdn.xyz/repo/jwarby/jekyll-pygments-themes/master/github.css" />

<!-- Styles -->

<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ”¥</text></svg>">

<link rel="stylesheet" href="/assets/css/main.css">
<link rel="canonical" href="/projects/perf_taint/">

<!-- JQuery -->
<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>


<!-- Theming-->

<script src="/assets/js/theme.js"></script>
<script src="/assets/js/dark_mode.js"></script>






    
<!-- MathJax -->
<script type="text/javascript">
  window.MathJax = {
    tex: {
      tags: 'ams'
    }
  };
</script>
<script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-mml-chtml.js"></script>
<script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>


  </head>

  <body class="fixed-top-nav ">

    <!-- Header -->

    <header>

    <!-- Nav Bar -->
    <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
    <div class="container">
      
      <a class="navbar-brand title font-weight-lighter" href="/">
       Marcin Copik
      </a>
      
      <!-- Navbar Toggle -->
      <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar top-bar"></span>
        <span class="icon-bar middle-bar"></span>
        <span class="icon-bar bottom-bar"></span>
      </button>
      <div class="collapse navbar-collapse text-right" id="navbarNav">
        <ul class="navbar-nav ml-auto flex-nowrap">
          <!-- About -->
          <li class="nav-item ">
            <a class="nav-link" href="/">
              about
              
            </a>
          </li>
          
          <!-- Blog -->
          <li class="nav-item ">
            <a class="nav-link" href="/blog/">
              blog
              
            </a>
          </li>
          
          <!-- Other pages -->
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/projects/">
                projects
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/publications/">
                publications
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/talks/">
                talks
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/students/">
                students
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/misc/">
                miscellaneous
                
              </a>
          </li>
          
          
          <li class="nav-item">
            <a class="nav-link" href="/assets/pdf/cv.pdf" target="_blank" rel="nofollow">
              CV
            </a>
          </li>
          
            <div class = "toggle-container">
              <a id = "light-toggle">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
              </a>
            </div>
          
        </ul>
      </div>
    </div>
  </nav>

</header>


    <!-- Content -->

    <div class="container mt-5">
      <div class="post">

  <header class="post-header">
    <h1 class="post-title">perf-taint</h1>
    <p class="post-description">Enhancing performance modeling with program analysis information.</p>
  </header>

  <article>
    
      <div class="project-summary">

      <ul>
        
          <li>
            
              <a href="/publications#2019perftaint" title="paper" target="_blank" rel="nofollow">
            
              <i class="fas fa-scroll"></i><span>Poster @ SC 2019</span>
              </a>
          </li>
        

        
          <li>
            <a href="/publications#2021perftaint" title="paper" target="_blank" rel="nofollow">
              <i class="fas fa-scroll"></i><span>Paper @ PPoPP 2021</span>
            </a>
          </li>
        

        
          <li>
            
              <a href="https://github.com/spcl/perf-taint" title="github" target="_blank" rel="nofollow">
              <i class="fab fa-github"></i><span>spcl/perf-taint</span>
            
            </a>
          </li>
        

        
          <li>
            <a href="https://doi.org/10.5281/zenodo.4295657" title="zenodo" target="_blank" rel="nofollow">
              <i class="ai ai-zenodo"></i><span>10.5281/zenodo.4295657</span>
            </a>
          </li>
        

        
          <li>
            <a href="https://hub.docker.com/r/spcleth/perf-taint" title="docker" target="_blank" rel="nofollow">
              <i class="fab fa-docker"></i><span>spcleth/perf-taint</span>
            </a>
          </li>
        
      </ul>
      </div>
    
    <p>Performance modeling has had a huge impact on the world of scientific and high-performance computing.
It gave us tools to discover scalability bugs, validate performance expectations, and design new systems.
In particular, empirical modeling tools made it much easier for users to derive parametric performance
models. After the long modeling process, users obtain parametric models estimating the behavior
of each function in the program.</p>

<div class="img-magnifier-container" style="vertical-align:middle; text-align:center">
    <a href="/assets/img/perf_taint/modeling_framework.png">
      <img class="img-fluid rounded z-depth-1" src="/assets/img/perf_taint/modeling_framework.png" alt="" title="Performance modeling framework." />
    </a>
</div>
<div class="caption">
  The Extra-P performance modeling toolchain, including first two manual steps (click to zoom).
</div>

<p>Unfortunately, those tools are not a perfect solution - they are not always easy to use,
not each model is perfect, and modeling is expensive: its cost increases exponentially with the number of parameters.
We identified five major issues:<br />
(1) users can usually afford to create models with 2-3 parameters, and selection of important program parameters is far from trivial;<br />
(2) experiment design process is manual and can be difficult as well;<br />
(3) instrumenting all functions adds significant overhead and affects the quality of results;<br />
(4) function models can present false-positive dependencies due to noise and overfitting,
<strong>particularly on small and short running functions</strong> (see example below);<br />
(5) empirical models can represent effects other than those resulting from the program itself, such as hardware effects.</p>

<div class="row justify-content-sm-center align-items-center">
  <div class="col-sm-8 mt-3 mt-md-0">
    <a href="/assets/img/perf_taint/false_model_code.png">
      <img class="img-fluid rounded z-depth-1" src="/assets/img/perf_taint/false_model_code.png" alt="" title="Performance modeling framework." />
    </a>
  </div>
  <div class="col-sm-4 mt-3 mt-md-0">
    <a href="/assets/img/perf_taint/false_model.png">
      <img class="img-fluid rounded z-depth-1" src="/assets/img/perf_taint/false_model.png" alt="" title="Performance modeling framework." />
    </a>
  </div>
</div>
<div class="caption">
  Example of an incorrect parameter dependency in a model (right): performance of the code (left) does not depend on <b>s</b>.
</div>

<p>Our work shows that these issues can be mitigated by <strong>turning the black-box empirical
modeling process into a white-box one</strong>. We include in the modeling process a program analysis step
to achieve two goals: identify functions which performance is constant with respect to input parameters,
and detect which parameters affect the functionâ€™s computational effort. In addition, the analysis must be memory agnostic
and inter-procedural, and it must be possible to integrate it into distributed MPI applications.</p>

<div class="img-magnifier-container" style="vertical-align:middle; text-align:center">
    <a href="/assets/img/perf_taint/taint_analysis.png">
      <img class="img-fluid rounded z-depth-1" src="/assets/img/perf_taint/taint_analysis.png" alt="" title="Dynamic taint analysis." />
    </a>
</div>
<div class="caption">
  Dynamic taint analysis in practice: the taint labels <b>a, b</b> are propagated to variables that depend on the value of <em>a</em> and <em>b</em>.
</div>

<p>We selected <strong>dynamic taint analysis</strong>, a computer security technique used to analyze the dependency
of program code on potentially malicious user input.
The analysis allows us to annotate program input parameters as a source of taint labels, and the
compiler instrumentation introduces propagation of taint labels across data flow and control flow.
Furthermore, the user memory region is replicated in the
so-called <em>shadow memory</em> to keep track of the labels associated with each program variable.
In the end, we can inspect performance-critical code regions, such as loop conditions
and determine which program parameters affected their value.</p>

<div class="img-magnifier-container" style="vertical-align:middle; text-align:center">
    <a href="/assets/img/perf_taint/perf_taint.png">
      <img class="img-fluid rounded z-depth-1" src="/assets/img/perf_taint/perf_taint.png" alt="" title="perf-taint." />
    </a>
</div>
<div class="caption">
  The <b>perf-taint</b> toolchain: user code is executed with the taint instrumentation, and the results are used in Extra-P modeling.
</div>

<p><strong>perf-taint</strong> extracts the vital program information to simplify the modeling process.
The parameter dependency is used to:<br />
(1) help users select modeling parameters;<br />
(2) simplify modeling experiments;<br />
(3) removing constant functions from instrumentation and modeling;<br />
(4) removing models with false dependencies;<br />
(5) detecting when empirical models differ substantially from the program and can include other effects.</p>

<p>We evaluated perf-taint on two HPC benchmarks and showed that perf-taint makes the performance
modeling easier, cheaper, and more robust.
In HPC applications, perf-taint helps primarily by identifying that over 85% of functions are constant.</p>

<div class="img-magnifier-container" style="vertical-align:middle; text-align:center">
    <a href="/assets/img/perf_taint/overhead.png">
      <img class="img-fluid rounded z-depth-1" src="/assets/img/perf_taint/overhead.png" alt="" title="Instrumentation overhead." />
    </a>
</div>
<div class="caption">
  Modeling runs are expensive: full instrumentation leads to huge overheads, and the default instrumentation is unsuitable for modeling.
  Application of the results of perf-taint decreases instrumentation overheads significantly.
</div>

<div class="img-magnifier-container" style="vertical-align:middle; text-align:center">
    <a href="/assets/img/perf_taint/intrusion.png">
      <img class="img-fluid rounded z-depth-1" src="/assets/img/perf_taint/intrusion.png" alt="" title="Instrumentation intrusion." />
    </a>
</div>
<div class="caption">
  Excessive instrumentation can change program behavior so much that performance models will not represent
the actual program behavior. Improved perf-taint instrumentation helps to generate better models.
</div>

<p>Our work has been recognized at the <strong>ACM Student Research Competition at Supercomputing 19</strong>,
where <a href="/publications#2019perftaint">the poster</a> won first place.
In addition, the full <a href="/publications#2021perftaint">research paper</a> has been presented at ACM SIGPLAN PPoPP 2021.</p>


  </article>

</div>

    </div>

    <!-- Footer -->

    
<footer class="fixed-bottom">
  <div class="container mt-0">
    &copy; Copyright 2021 Marcin  Copik.
    Powered by <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio">al-folio</a> theme.

    
    
    Last updated: July 20, 2021.
    
  </div>
</footer>

<script type="text/javascript" src="/assets/js/lightbox.js"></script>
<link rel="stylesheet" href="/assets/css/lightbox.css">


  </body>

  <!-- Bootsrap & MDB scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.4/umd/popper.min.js" integrity="sha512-eUQ9hGdLjBjY3F41CScH3UX+4JDSI9zXeroz7hJ+RteoCaY+GP/LDoM8AO+Pt+DRFw3nXqsjh9Zsts8hnYv8/A==" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha512-M5KW3ztuIICmVIhjSqXe01oV2bpe248gOxqmlcYrEzAvws7Pw3z6BK0iGbrwvdrUQUhi3eXgtxp5I8PDo9YfjQ==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js" integrity="sha512-Mug9KHKmroQFMLm93zGrjhibM2z2Obg9l6qFG2qKjXEXkMp/VDkI4uju9m4QKPjWSwQ6O2qzZEnJDEeCw0Blcw==" crossorigin="anonymous"></script>

  
<!-- Mansory & imagesLoaded -->
<script defer src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script defer src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
<script defer src="/assets/js/mansory.js" type="text/javascript"></script>


  


<!-- Medium Zoom JS -->
<script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
<script src="/assets/js/zoom.js"></script>


<!-- Load Common JS -->
<script src="/assets/js/common.js"></script>


</html>
